// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('starter.controllers', []).controller('AppCtrl', function($scope, $ionicModal, $timeout) {
    $scope.menuItems = [
      {
        name: 'app.main',
        title: '我是吃货'
      }, {
        name: 'app.chief',
        title: '我是大厨'
      }
    ];
    $scope.loginData = {};
    $ionicModal.fromTemplateUrl('templates/login.html', {
      scope: $scope
    }).then(function(modal) {
      return $scope.modal = modal;
    });
    $scope.closeLogin = function() {
      return $scope.modal.hide();
    };
    $scope.login = function() {
      return $scope.modal.show();
    };
    return $scope.doLogin = function() {
      console.log('Doing login', $scope.loginData);
      return $timeout(function() {
        return $scope.closeLogin();
      }, 1000);
    };
  }).controller('EaterylistCtrl', function($scope, $http, $state) {
    var s;
    s = $scope;
    angular.extend(s, {
      eateries: void 0,
      getEateries: function() {
        return $http.get('api/eateries').success(function(eateries) {
          eateries.forEach(function(eatery) {
            eatery.likes = 12;
            eatery.eats = 20;
            eatery.$shifts = [
              {
                'time': '今天19:00',
                capacity: 5,
                orders: [1, 2, 3]
              }, {
                'time': '明天19:00',
                capacity: 5,
                orders: [1, 2]
              }, {
                'time': '9月4号19:00',
                capacity: 5,
                orders: [1, 2, 3, 4, 5]
              }, {
                'time': '11月10号19:00',
                capacity: 5,
                orders: [1, 2, 3, 4]
              }
            ];
            return eatery.$shift = eatery.$shifts[0];
          });
          return s.eateries = eateries;
        });
      },
      viewEateryDetail: function(eatery) {
        return $state.go('app.eateryDetail', {
          eateryId: eatery._id
        });
      },
      onJoin: function($event, eatery) {
        return $event.stopPropagation();
      }
    });
    return s.getEateries();
  }).controller('EaterydetailCtrl', function($scope, $http, $state) {
    var s;
    s = $scope;
    angular.extend(s, {
      eatery: void 0,
      getEatery: function() {
        return $http.get('api/eateries/' + $state.params.eateryId).success(function(eatery) {
          eatery.likes = 12;
          eatery.eats = 20;
          eatery.$shifts = [
            {
              'time': '今天19:00',
              capacity: 5,
              orders: [1, 2, 3],
              price: 20
            }, {
              'time': '明天19:00',
              capacity: 5,
              orders: [1, 2],
              price: 30
            }, {
              'time': '9月4号19:00',
              capacity: 5,
              orders: [1, 2, 3, 4, 5],
              price: 20
            }, {
              'time': '11月10号19:00',
              capacity: 5,
              orders: [1, 2, 3, 4]
            }, {
              price: 20
            }
          ];
          eatery.$shift = eatery.$shifts[0];
          return s.eatery = eatery;
        });
      }
    });
    return s.getEatery();
  }).controller('PlaylistsCtrl', function($scope) {
    return $scope.playlists = [
      {
        title: 'Reggae',
        id: 1
      }, {
        title: 'Chill',
        id: 2
      }, {
        title: 'Dubstep',
        id: 3
      }, {
        title: 'Indie',
        id: 4
      }, {
        title: 'Rap',
        id: 5
      }, {
        title: 'Motel',
        id: 6
      }
    ];
  }).controller('PlaylistCtrl', function($scope, $stateParams) {});

}).call(this);
